***نکته: ویدئو مربوط به نصب لینوکس را داکیومنت نکردی***

دوتا از ابزارهایی که برای اتوماتیک‌سازی نصب و راه‌اندازی محیط استفاده می‌شوند، [[packer]] و [[vagrant]] هستند

در ابزار [[vagrant]] ما می‌تونیم از روی یک ایمیج فایلی یه محیط و یا به اصطلاح environment بیاریم بالا و به راحتی ست کنیم که مشخصاتش چی باشه

ابزار [[packer]] این امکان رو به ما میده که ما به وسیله اون بتونیم یک ایمیج آماده کنیم

این نکته را در نظر بگیرید که در اینجا ایمیجی که ازش صحبت می کنیم، ایمیج‌های virtual machineهاست، هرچند که ابزار [[packer]] ایمیج داکر هم می‌تواند ایجاد کند.

***در توزیع‌های مختلف پیشنهاد می‌شود که برای یادگیری یکبار توزیع arch linux را از روی how to... خودش نصب کنید***

سایت [distrowatch.com](https://distrowatch.com) اپدیت توزیع‌های مختلف را میزاره


## معماری لینوکس
![[Pasted image 20240509085755.png]]

#### process management

![[Pasted image 20240509090002.png]]

پراسس را یک instance از اون برنامه، اپلیکیشن یا نرم‌افزار ما هست که این پراسس typeهای مختلف داره، میتونه single thread یا multi thread باشه

پراسس‌ها می‌تونن foreground یا background باشند

daemon: سرویسی است که در بکگراند ران شده است و ما می‌تونیم مدیریتش کنیم

حالا ما برای اینکه بتونیم پراسس‌هامون رو ببینیم نیاز به یه utility داریم
این utility حتما نباید یک gui باشه، میتونه یک command باشه

هر پراسس چند state دارد:
create
ready
waiting
running
terminating
stop

یعنی یک پراسس در طول زمان حیات خودش در هر لحظه در یکی از این stateها قرار میگیرد، state مطلوب ما برای یک پراسس running است که در آن پراسس اجرا شده و داره کار خودشو میکنه

یکسری پراسس‌ها وجود دارند که به آنها پراسس‌های zombie میگیم، پراسس‌هایی که parent ندارند

![[Pasted image 20240509091331.png]]


اپلیکیشن‌ها و پراسس‌ها می‌تونن single thread یا multi thread باشند
هر core فیزیکی cpu به ما دو تا thread میده


### کامندهای پرکاربرد
**bg, fg, jobs:**

![[Pasted image 20240509091646.png]]

![[Pasted image 20240509091907.png]]

**jobs:** show all background process

**kill -9:** در جا پراسس را میکشد و صبر نمیکنه که پراسس کارش تموم بشه

![[Pasted image 20240509101007.png]]


در کامند htop قسمت load average اگر برابر با تعداد cpu's core بود یعنی اینکه از ۱۰۰درصد cpu داره استفاده میشه

به وسیله xargs می‌تونیم خروجی یه دستور رو بگیریم بدیم به ورودی دستور بعدی، مثلا
```sh
pidof nginx | xargs sudo kill -9
```



### package manager

پکیج چیست؟
پکیج یه اپلیکیشن با همه دور و بری‌هاشه، یعنی هرچیزی که اون اپلیکیشن نیاز داره، مثل dependencyهایی که لازم داره یا دیتایی که لازم داره

پکیج منیجر این امکان رو به ما میده تا این پکیج‌ها رو به راحتی نصب کنیم

به طور خلاصه، یکسری ریپازیتوری وجود دارد، مثل یکسری مکان در نظر بگیرید، پکیج‌ها در این ریپازیتوری‌ها ذخیره میشن، لیست این پکیج‌ها در یکسری دیتابیس در سیستم ما قرار داره، و ما با اجرای دستوری مثل `apt update` در واقع اون لیست را به روز می‌کنیم، و وقتی دستور نصب را اجرا می‌کنیم میره اون لیست رو میخونه و اگر پیدا کرد از ریپازیتوری مشخصی که برای اون پکیج هست اون رو دریافت میکنه و نصب میکنه

ما در اوبونتو از پکیج منیجر apt (advance package tool) استفاده می‌کنیم
بعضی از دستورات این پکیج منیجر:
```sh
apt update
apt upgrade
apt install
```

داخل دایرکتوری `/etc/apt` تمام کانفیگ این پکیج منیجر اونجاست و ما می‌تونیم اونها رو تغییر بدیم

***نکته: در لینوکس همه چیز فایل است و شما می‌توانید با تغییر فایل‌ها تمام کانفیگ‌ها رو عوض کنید.

برای اینکه این پکیج منیجر مطمئن باشه که از ریپازیتوری‌های قابل اطمینانی داره پکیج رو دریافت می‌کنه، قبل از دریافت پکیج از یک [[GPG key]] استفاده میکنه به این صورت که اول این [[GPG key]] رو دریافت می‌کنه و بعد در درخواست بعدی برای دریافت پکیج از اون استفاده میکنه تا مطمئن باشه که داره پکیج رو از ریپازیتوری رسمی دریافت می‌کنه

با دستوری `apt-key list` میتونیم لیست این کلیدها رو ببینیم
همچنین در مسیر `/etc/apt/trusted.gpg.d` این لیست موجود است

با کامند `dpkg -i`  هم می‌توان یک پکیج را از طریق فایل `.deb` آن نصب کرد


لیست repositoryهای موجود در ubuntu رو میشه در فایل `/etc/apt/source.list` پیدا کرد، یک دایرکتوری `source.list.d` نیز در این مسیر وجود دارد که معمولا این `.d`ها اضافه بر سازمان هستند،‌ مثلا شما در فایل `source.list` لیست repositoryها رو دارین و در دایرکتوری `source.list.d` اون repositoryهای اضافه رو دارین

***نکته:***
وقتی شما دستور `apt update` رو اجرا می‌کنید، سیستم میره این لیست repositoryها رو میخونه و از روی این لیست شروع میکنه یه دیتابیسی رو داخل خودش اپدیت میکنه که در اون دیتابیسه داره لیست پکیج‌ها رو قرار میده
و بعد وقتی دستور `apt install nginx` رو اجرا می‌کنیم، از روی این لیست repositoryها، میدونه nginx در کدام repository هستش و میره اون رو از اون repository میگیره و نصب می‌کنه

با اجرای دستور `apt upgrade` پکیج‌هایی که در این repositoryها وجود دارند اپدیت می‌شن

با اجرای دستور `apt autoremove` سیستم خودکار وابستگی‌های پکیج‌های مختلف که deprecate شدن رو پاک میکنه

دستور `apt remove [package_name]` پکیج رو پاک میکنه
دستور `apt purge [package_name]` هم پکیج رو پاک میکنه هم فایل‌های اون پکیج رو حذف میکنه


#### proxy for apt:
برای ست کردن پروکسی برای پکیج منیجر apt کافی است که در مسیر `/etc/apt/apt.conf.d` یک فایل به طور مثال با نام `01proxy` بسازید با محتوای زیر:
```sh
Acquire::http::Proxy "http://127.0.0.1:8123";
Acquire::https::Proxy "http://127.0.0.1:8123";
```

 خوبه که پروکسی ست کنیم برای این پکیج منیجر و خوبه که ignore proxy هم داشته باشیم، تا مثلا برای پکیج‌‌هایی که از داخل ایران قراره بگیره دیگه نره خارج ایران و برگرده

